(this.webpackJsonpgradient=this.webpackJsonpgradient||[]).push([[0],{164:function(e,t,n){"use strict";n.r(t);var a=n(187),c=n(2),r=n.n(c),o=n(117),i=n.n(o),l=n(184),s=n(185),u=n(181),d=n(6),b=n(17),j=n(55);function h(e){return"rgba(".concat(255*e.r,", ").concat(255*e.g,", ").concat(255*e.b,", ").concat(100*e.a,"%)")}function g(e,t){var n=j.converter("hsl")(Object(b.a)({mode:"rgb"},e));Object.assign(n,t);var a=j.converter("rgb")(n);return Object(b.a)(Object(b.a)({},e),{},{r:a.r,g:a.g,b:a.b})}var p=n(190),x=r.a.createContext({}),f=n(118);function O(e){return Object(f.sortBy)(e,(function(e){return e.position}))}function v(e,t){if(0===e.length)return null;var n=function(e,t){var n=e[0],a=e[e.length-1];if(e.length>1){if(t<n.position)return[n,n];if(t>a.position)return[a,a];for(var c=0;c<e.length-1;c++)if(e[c].position<=t&&t<=e[c+1].position)return[e[c],e[c+1]]}return[n,a]}(e,t),a=Object(d.a)(n,2),c=a[0],r=a[1],o=r.position-c.position,i=(t-c.position)/(0===o?1:o),l=1-i,s=c.color,u=r.color;return{r:s.r*l+u.r*i,g:s.g*l+u.g*i,b:s.b*l+u.b*i,a:s.a*l+u.a*i}}var m=n(5);function C(e,t){var n=e.clientX,a=t.getBoundingClientRect(),c=a.left,r=a.width;return Math.min(1,Math.max(0,(n-c)/r))}function A(e){var t=e.colorStops,n=e.selectedStopId,a=r.a.useContext(x),c=r.a.useState(null),o=Object(d.a)(c,2),i=o[0],l=o[1],s=r.a.useRef(null),u=r.a.useCallback((function(e){var t=e.target.dataset.stopid;t&&(l(t),a.select(t))}),[a]),b=r.a.useCallback((function(){l(null)}),[]),j=r.a.useCallback((function(e){var t=s.current;if(i&&t){var n=C(e,t);a.changePartial(i,{position:n})}}),[i,a]);Object(p.a)("mouseup",i?b:null,window,{capture:!0}),Object(p.a)("mousemove",i?j:null,window,{capture:!0});var g=r.a.useCallback((function(e){var n=e.target.dataset.stopid;if(n)a.select(n),e.stopPropagation(),e.preventDefault();else if(e.target===s.current){var c=C(e,s.current),r=function(e,t){return v(O(e),t)}(t,c)||{r:1,g:0,b:1,a:1},o=Math.random().toString(32);a.add({id:o,position:c,color:r}),a.select(o)}}),[a,t]);return Object(m.jsx)("div",{style:{position:"relative",height:"1em",background:"cornsilk"},onMouseDown:u,onClick:g,ref:s,children:t.map((function(e){return Object(m.jsxs)("div",{"data-stopid":e.id,style:{position:"absolute",left:"".concat(100*e.position,"%"),transform:"translateX(-50%)",background:h(e.color),color:h((t=e.color,{r:1-t.r,g:1-t.g,b:1-t.b,a:t.a})),cursor:"move",userSelect:"none",width:"5ch",textAlign:"center",border:"1px solid black",borderColor:n===e.id?"black":"transparent",fontSize:"8pt"},children:[(100*e.position).toFixed(0),"%"]},e.id);var t}))})}var k=n(47),w=n(178),S=n(186),y=n(182),I=n(183),F=n(122),M=n(188);function B(e){var t=e.onChange,n=e.label,a=e.value,c=e.colorScheme,r=e.eventKey,o=e.min,i=e.max,l=e.formatHelp,s=e.trackColor;return Object(m.jsxs)(k.a,{children:[Object(m.jsx)(w.a,{children:n}),Object(m.jsxs)(S.a,{colorScheme:c,value:a,step:0,onChange:function(e){return t(r,e)},min:o,max:i,children:[Object(m.jsx)(S.d,{children:Object(m.jsx)(S.b,{bg:s})}),Object(m.jsx)(S.c,{})]}),l?Object(m.jsx)(k.b,{children:l(a)}):null]})}var K=function(e){var t=Math.round(255*e);return Object(m.jsxs)(m.Fragment,{children:[e.toFixed(5)," (",t,", ",t.toString(16),")"]})};function Q(e){var t=e.stop,n=r.a.useContext(x),a=r.a.useCallback((function(e,a){var c=Object(b.a)({},t),r=c.color;switch(e){case"red":c.color=Object(b.a)(Object(b.a)({},r),{},{r:a});break;case"green":c.color=Object(b.a)(Object(b.a)({},r),{},{g:a});break;case"blue":c.color=Object(b.a)(Object(b.a)({},r),{},{b:a});break;case"alpha":c.color=Object(b.a)(Object(b.a)({},r),{},{a:a});break;case"hue":c.color=g(r,{h:a});break;case"saturation":c.color=g(r,{s:a});break;case"lightness":c.color=g(r,{l:a})}n.change(c)}),[n,t]),c=j.converter("hsl")(Object(b.a)({mode:"rgb"},t.color));return Object(m.jsxs)(u.a,{borderWidth:"1px",borderRadius:"lg",p:6,children:[Object(m.jsxs)(k.a,{children:[Object(m.jsx)(w.a,{children:"Position"}),Object(m.jsxs)(S.a,{value:t.position,step:0,min:0,max:1,onChange:function(e){return n.changePartial(t.id,{position:e})},children:[Object(m.jsx)(S.d,{}),Object(m.jsx)(S.c,{})]}),Object(m.jsxs)(k.b,{children:[(100*t.position).toFixed(2),"%"]})]}),Object(m.jsxs)(y.a,{templateColumns:"repeat(4, 1fr)",gap:6,children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Red",eventKey:"red",onChange:a,value:t.color.r,min:0,max:1,colorScheme:"red",formatHelp:K})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Green",eventKey:"green",onChange:a,value:t.color.g,min:0,max:1,colorScheme:"green",formatHelp:K})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Blue",eventKey:"blue",onChange:a,value:t.color.b,min:0,max:1,colorScheme:"blue",formatHelp:K})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Alpha",eventKey:"alpha",onChange:a,value:t.color.a,min:0,max:1,colorScheme:"blackAlpha",formatHelp:K})})]}),Object(m.jsxs)(y.a,{templateColumns:"repeat(3, 1fr)",gap:6,children:[Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Hue",eventKey:"hue",onChange:a,value:c.h||0,min:0,max:360,trackColor:"hsl(".concat((c.h||0).toFixed(1),"deg, 100%, 50%)")})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Saturation",eventKey:"saturation",onChange:a,value:c.s,min:0,max:1,trackColor:"hsl(".concat((c.h||0).toFixed(1),"deg, ").concat((100*c.s).toFixed(1),"%, 50%)")})}),Object(m.jsx)(u.a,{children:Object(m.jsx)(B,{label:"Lightness",eventKey:"lightness",onChange:a,value:c.l,min:0,max:1,trackColor:"hsl(0deg, 0%, ".concat((100*c.l).toFixed(1),"%)")})})]}),Object(m.jsx)(I.a,{py:4}),Object(m.jsx)(F.a,{pt:4,spacing:"6",children:Object(m.jsx)(M.a,{colorScheme:"red",onClick:function(){return n.delete(t.id)},children:"Delete stop"})})]})}function E(e,t){switch(t.type){case"add":return e.concat([t.value]);case"changePartial":return e.map((function(e){return e.id!==t.id?e:Object(b.a)(Object(b.a)({},e),t.changes)}));case"change":return e.map((function(e){return e.id!==t.value.id?e:t.value}));case"delete":return e.filter((function(e){return e.id!==t.id}))}return e}function R(e){var t=e.colorStops,n=r.a.useRef(null);return r.a.useEffect((function(){var e=n.current;if(e){var a=e.getContext("2d");a&&function(e,t){e.canvas.width=0|e.canvas.width;for(var n=new ImageData(e.canvas.width,4),a=O(t),c=0;c<n.width;c++){var r=v(a,c/(n.width-1));if(null===r)break;for(var o=0;o<n.height;o++){var i=4*(o*n.width+c);n.data[i]=Math.round(255*r.r),n.data[i+1]=Math.round(255*r.g),n.data[i+2]=Math.round(255*r.b),n.data[i+3]=Math.round(255*r.a)}}e.putImageData(n,0,0),e.drawImage(e.canvas,0,0,n.width,2,0,0,n.width,e.canvas.height)}(a,t)}}),[t]),Object(m.jsx)("canvas",{ref:n,width:1200,height:150,style:{width:"100%",background:"url(".concat("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAACgCAMAAACsXRuGAAAADFBMVEWIiIjd3d3y8vLm5uZzdc63AAAAbklEQVR42u3ZIQ4AIAwDwI39/8/wAlTFxFUgm5ALmFZV51Iv52Vyx/7CzhdONr3/ylCgQIECBQoUKFCgQIECBQoUKFCgQIECBcrmccGe4qX4vqBAgQIFChQoUKBAgQIFChQoUKBAgQIFij3lX3gBXBBzc8FaGvIAAAAASUVORK5CYII=",")")}})}var P=n(189),U=n(14),D=n.n(U),H=n(23),V=n(123),X=n(124),G=n.n(X),z=n(49);function W(e){var t=e.r,n=e.g,a=e.b,c=e.a,r=Z(t),o=Z(n),i=Z(a),l=Z(c);return"[".concat(r,",").concat(o,",").concat(i,",").concat(l,"]")}function L(e){return e===Math.round(e)?e.toFixed(0):e.toFixed(3)}function Z(e){return e===Math.round(e)?e.toFixed(0):e.toFixed(4)}function q(e,t){return Math.abs(e-t)<.001?Z(e):"".concat(Z(e)," * beta + ").concat(Z(t)," * alpha")}function J(){return(J=Object(H.a)(D.a.mark((function e(t){var n,a,c,r,o,i,l,s,u,d,b;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=O(t),(c=(a=[]).push.bind(a))("function getColor(position) {"),r=0;r<n.length;r++)o=n[r],i=r<n.length-1?n[r+1]:null,l=W(o.color),s=L(o.position),0===r?c("if(position <= ".concat(s,") return ").concat(l,";")):r===n.length-1&&c("return ".concat(l,";")),i&&(c("if(position < ".concat(L(i.position),")")),c("{"),u=L(i.position-o.position),c("const beta = (position - ".concat(s,") / ").concat(u,", alpha = 1 - beta;")),c("return [\n      ".concat(q(o.color.r,i.color.r),",\n      ").concat(q(o.color.g,i.color.g),",\n      ").concat(q(o.color.b,i.color.b),",\n      ").concat(q(o.color.a,i.color.a),",\n      ];")),c("}"));return c("}"),d=a.join(""),e.next=9,Object(z.b)(d,{mangle:!1});case 9:if(e.t0=e.sent.code,e.t0){e.next=12;break}e.t0="";case 12:return b=e.t0,e.abrupt("return",Object(V.format)(b,{parser:G.a.parsers.babel.parse,printWidth:120}));case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){var t=e.colorStops,n=r.a.useState(""),a=Object(d.a)(n,2),c=a[0],o=a[1];return r.a.useEffect((function(){(function(e){return J.apply(this,arguments)})(t).then(o)}),[t]),Object(m.jsx)(P.a,{readOnly:!0,value:c,rows:15})}function T(){return[{id:"1",position:0,color:{r:0,g:0,b:0,a:1}},{id:"2",position:.5,color:{r:0,g:1,b:0,a:1}},{id:"3",position:1,color:{r:1,g:1,b:1,a:1}}]}var Y=function(){var e=function(e){var t=r.a.useReducer(E,void 0,e),n=Object(d.a)(t,2),a=n[0],c=n[1],o=r.a.useState(null),i=Object(d.a)(o,2),l=i[0],s=i[1],u=r.a.useCallback((function(e){c({type:"add",value:e})}),[c]);return{objects:a,selectedId:l,change:r.a.useCallback((function(e){c({type:"change",value:e})}),[c]),changePartial:r.a.useCallback((function(e,t){c({type:"changePartial",id:e,changes:t})}),[c]),add:u,delete:r.a.useCallback((function(e){c({type:"delete",id:e})}),[c]),select:s}}(T),t=e.objects,n=e.selectedId,a=t.find((function(e){return e.id===n}));return Object(m.jsx)(l.a,{maxW:"container.xl",children:Object(m.jsx)(x.Provider,{value:e,children:Object(m.jsxs)(s.a,{defaultIndex:[0,1],allowMultiple:!0,reduceMotion:!0,children:[Object(m.jsxs)(s.d,{children:[Object(m.jsx)("h2",{children:Object(m.jsxs)(s.b,{children:[Object(m.jsx)(u.a,{flex:"1",textAlign:"left",children:"Editor"}),Object(m.jsx)(s.c,{})]})}),Object(m.jsxs)(s.e,{pb:4,children:[Object(m.jsx)(R,{colorStops:t}),Object(m.jsx)(A,{colorStops:t,selectedStopId:n}),a?Object(m.jsx)(Q,{stop:a}):null]})]}),Object(m.jsxs)(s.d,{children:[Object(m.jsx)("h2",{children:Object(m.jsxs)(s.b,{children:[Object(m.jsx)(u.a,{flex:"1",textAlign:"left",children:"Code"}),Object(m.jsx)(s.c,{})]})}),Object(m.jsx)(s.e,{pb:4,children:Object(m.jsx)(N,{colorStops:t})})]})]})})})};i.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(a.a,{children:Object(m.jsx)(Y,{})})}),document.getElementById("root"))}},[[164,1,2]]]);